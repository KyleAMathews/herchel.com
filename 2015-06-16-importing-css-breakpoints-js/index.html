<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-js-dd8a8a2a2990c9ece435.js" as="script"/><link rel="preload" href="/component---src-templates-blog-post-js-c1b918aab55f1ae26571.js" as="script"/><link rel="preload" href="/path---2015-06-16-importing-css-breakpoints-js-a50bb61e5c31dac790a9.js" as="script"/><link rel="preload" href="/app-6e14b167f0cdf5c1d410.js" as="script"/><link rel="preload" href="/commons-2ac1454bd2f377e5e587.js" as="script"/><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-6e14b167f0cdf5c1d410.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","107818501498521":"component---src-templates-blog-post-js-c1b918aab55f1ae26571.js","263791100135453":"component---src-pages-about-js-6378334010cb8eb05840.js","70144966829960":"component---src-pages-contact-js-0e5db878379671e5c08b.js","246501157640856":"component---src-pages-events-js-0aa27845567e79fecffd.js","35783957827783":"component---src-pages-index-js-758b205c71b6194689c6.js","201137348325247":"component---src-pages-philosophy-js-e97467f3f5edfa6a9c94.js","60335399758886":"path----557518bd178906f8d58a.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","70377159570471":"path---2012-12-02-florida-drupalcamp-2012-session-notes-a5ad904f97cc44750cbe.js","151134770526471":"path---2013-05-21-drupalcon-portland-session-notes-f5fdfdc6e91b0f732348.js","89926328501068":"path---2013-10-20-drupalcamp-atlanta-session-notes-8a710b2f59af08deb8ad.js","233186495815067":"path---2014-03-08-forida-drupalcamp-presentation-notes-c56ac3b49ff88d9af7c3.js","153452737195766":"path---2014-04-02-ie-dev-tips-b58cdd66490d5f7df5a4.js","114348242770263":"path---2014-04-29-notes-on-developing-drupal-8-alpha-13-9cbd6fed712a5e94d9a6.js","254080940965904":"path---2014-09-04-new-method-comment-spam-376c493732a4d359d0f6.js","22890600373292":"path---2015-04-19-making-syfy-animations-not-suck-19b9247588412a302721.js","172002563442199":"path---2015-06-09-advice-newbie-frontend-developer-b9a9d75b2496f7e85312.js","39229358024304":"path---2015-06-16-importing-css-breakpoints-js-a50bb61e5c31dac790a9.js","257517845488331":"path---2017-12-31-reflections-on-2017-26ff5c358315f201c189.js","156685852824985":"path---2018-01-01-hello-2018-6869c77072a28c030909.js","273950069227526":"path---about-f8f2f2235c0cec2b21e4.js","184662623972074":"path---contact-f8f2f2235c0cec2b21e4.js","44713349584700":"path---events-0463966133c5109f1b08.js","142629428675168":"path---index-890629b4e718af3f7930.js","131048373002594":"path---philosophy-f8f2f2235c0cec2b21e4.js","114276838955818":"component---src-layouts-index-js-dd8a8a2a2990c9ece435.js"}/*]]>*/</script><script>window.__EMOTION_CRITICAL_CSS_IDS__ = ["1eisola","fax5li"];</script><style>.css-1eisola{max-width:100%;overflow:auto;-webkit-overflow-scrolling:touch;font-size:1.5rem;}.css-1eisola a:not(:last-child){margin-right:0.6rem;}.css-fax5li img{border-radius:50%;}</style><title data-react-helmet="true">Importing CSS Breakpoints Into Javascript | Mike Herchel</title><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/commons-2ac1454bd2f377e5e587.js","/app-6e14b167f0cdf5c1d410.js","/path---2015-06-16-importing-css-breakpoints-js-a50bb61e5c31dac790a9.js","/component---src-templates-blog-post-js-c1b918aab55f1ae26571.js","/component---src-layouts-index-js-dd8a8a2a2990c9ece435.js"])/*]]>*/</script><style id="gatsby-inlined-css"></style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="-2028497406"><header class="css-1eisola" data-reactid="2"><a href="/" data-reactid="3">Home</a><a href="/about" data-reactid="4">About</a><a href="/philosophy" data-reactid="5">Philosophy</a><a href="/events" data-reactid="6">Events</a><a href="/contact" data-reactid="7">Contact</a></header><div data-reactid="8"><!-- react-empty: 9 --><h1 data-reactid="10">Importing CSS Breakpoints Into Javascript</h1><p data-reactid="11">June 16, 2015</p><div data-reactid="12"><p><em>Note this article was originally published on <a href="https://www.lullabot.com/articles/importing-css-breakpoints-into-javascript">Lullabot.com</a>.</em></p>
<p>There are a lot of challenges within responsive web design, and one that that has constantly been a pain is triggering JavaScript based on the current CSS media query breakpoint. The problem is that the breakpoints are in CSS, which JavaScript has no native way to access. Many solutions (including <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia">window.matchMedia()</a>, and <a href="http://wicky.nillia.ms/enquire.js/">Enquire.js</a>) involve declaring your breakpoints in both CSS and JS, or require IE10+. The problem with these solutions is that when you change a breakpoint value, you have to change it twice. However, it doesn’t need to be like this.</p>
<h2>A Simpler Solution</h2>
<p>A quick and easy solution to this problem is to have your JS import the breakpoints directly from the CSS values in the DOM. This solution brings the current breakpoint variable into your JS in a way that’s</p>
<ul>
<li>Simple &#x26; Lightweight</li>
<li><a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a></li>
<li>Compatible with all browsers that support media queries (IE9+)</li>
</ul>
<p>To see where we’re going with this, check out this <a href="http://codepen.io/mherchel/pen/gbygBd">fully functioning codepen</a>. Now, let’s get started!</p>
<h2>Declare your breakpoints</h2>
<p>For simplicity, this code is straight CSS and can easily be abstracted to Sass or Less.</p>
<div class="gatsby-highlight">
      <pre class="language-css"><code><span class="token comment">/**
 * These values will not show up in content, but can be 
 * queried by JavaScript to know which breakpoint is active.
 * Add or remove as many breakpoints as you like.
 */</span>
<span class="token selector">body:before</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"smartphone"</span><span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token comment">/* Prevent from displaying. */</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 700px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">body:before</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"tablet"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 1100px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">body:before</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"desktop"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Note that I have to hide the <code>::before</code> pseudo-element so it doesn’t show to the user.</p>
<h2>Importing the Breakpoints into JavaScript</h2>
<p>This is the magic that queries the property for the current breakpoint. In this combination of jQuery and javascript, I’m using an object to store the value.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">var</span> breakpoint <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
breakpoint<span class="token punctuation">.</span><span class="token function-variable function">refreshValue</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">':before'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\"/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>There’s a couple things going on here. I’m querying the content property on the <code>::before</code> pseudo element using this <a href="http://davidwalsh.name/pseudo-element">method popularized by David Walsh</a>. I can’t attach the content property directly to the body tag, because Internet Explorer 9 will return a value of “normal” when querying. IE10 and IE11 work fine. Ugh!</p>
<p>Firefox and IE return the value with double quotes, while other browsers do not. To get consistent values I’m using replace() with regex to strip those out.</p>
<h2>Trigger on resize and page load</h2>
<p>Breakpoints change based on your browser’s viewport width, so I need to update the value when the browser is resized. I also trigger a resize event on the initial page load to get the first value.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  breakpoint<span class="token punctuation">.</span><span class="token function">refreshValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<h2>In use</h2>
<p>This is a simple if-else statement that queries the current breakpoint, and runs code based on the result.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>breakpoint<span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token string">'tablet'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Tablet breakpoint'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Some other breakpoint'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<h2>Sample Use Case</h2>
<p>While redeveloping the website for <a href="http://www.syfy.com/">Syfy.com</a>, I had an interesting problem where I needed to inject a 728x90 leaderboard advertisement within the second row of tiles. The difficult part of this is that the number of tiles per row changes depending on the current breakpoint.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/breakpoint-tiles-0676e5937a5b921723dc65974d3ed12b-2074a.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 56.69291338582677%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABY0lEQVQoz4WSSW/CMBCF8/9/BYdKVKIiEHpB6o0LSYsaKAlkgZAFWmUBytIT6NUzFSGgQC19mudt/Ma2pKoahkMDhmFyJPr9PnT9Q+gxY5p2rq/7RW1ZLiRVfYPjzDCZBBwJXR9gNHLy/nR6nvvrh6U6CBaQul1NODIwGJgciV7vHeOxgzCc55xc0EG2PRHzLhPHKdbrDbPd7iDRZt+nTQuOBI2RK8L3o1x7XsgHW9Y5YZJk2Gx2zH7/A0nTenBdn61TJGisrFyaMwzrfslld6iqr3mJlIDiavXNDugRZrNIrPeZoo6iL0jV6iNarWc0mwoUpcW6XpeFG4+hhRTjOMNyuf7fYafTQbvdFkmakGUFjYYi+i83S6bHCoI53ydR1PO5cAjR0jTLbV+XUdSU/OmpgUrlAbWajMXiE1m2vCBPePnPgpsOkyTF4XBgjscjrhsnjOOEv8IJx/FKtW1POeG99gtqURSlrkrhIQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Sample use case"
        title=""
        src="/static/breakpoint-tiles-0676e5937a5b921723dc65974d3ed12b-fb8a0.png"
        srcset="/static/breakpoint-tiles-0676e5937a5b921723dc65974d3ed12b-1a291.png 148w,
/static/breakpoint-tiles-0676e5937a5b921723dc65974d3ed12b-2bc4a.png 295w,
/static/breakpoint-tiles-0676e5937a5b921723dc65974d3ed12b-fb8a0.png 590w,
/static/breakpoint-tiles-0676e5937a5b921723dc65974d3ed12b-526de.png 885w,
/static/breakpoint-tiles-0676e5937a5b921723dc65974d3ed12b-2074a.png 889w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>Below is a simplified example of how I handled this.</p>
<h3>1. Get the current breakpoint</h3>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token comment">/**
 * Global: Get current CSS breakpoint
 */</span>
 
<span class="token keyword">var</span> breakpoint <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
breakpoint<span class="token punctuation">.</span><span class="token function-variable function">refreshValue</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">':before'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\"/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<h3>2. Function to pass the number of columns to leaderboardMoveHelper()</h3>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token comment">/**
 * Pass the number of columns to leaderboardMoveHelper() to do all the work
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">leaderboardMove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>breakpoint<span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token string">'tablet_narrow'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">leaderboardMoveHelper</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>breakpoint<span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token string">'tablet_wide'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>breakpoint<span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token string">'normal'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">leaderboardMoveHelper</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>breakpoint<span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token string">'wide'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">leaderboardMoveHelper</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<h3>3. Helper function to move the leaderboard to the appropriate location within the DOM</h3>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token comment">/**
 * Move the leaderboard to the second row
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">leaderboardMoveHelper</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>columns<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> $tileView       <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.tile-container'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">,</span>
      $leaderboard    <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.ad-leaderboard.processed'</span><span class="token punctuation">,</span> $tileView<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// Move the leaderboard</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.tile:nth-child('</span> <span class="token operator">+</span> <span class="token punctuation">(</span>columns<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">,</span> $tileView<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>$leaderboard<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Indicate it's moved</span>
  $leaderboard<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'js-leaderboard-processed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  $tileView<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'js-leaderboard-processed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<h3>4. Run the JS on browser resize and page load</h3>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token comment">/**
* Execute
*/</span>
<span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  breakpoint<span class="token punctuation">.</span><span class="token function">refreshValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">leaderboardMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<h2>Conclusion</h2>
<p>This is a simplification of a very useful technique. The same logic can also be used to pass breakpoint states of elements by modifying pseudo-elements of any element within the DOM. For example, if you have an element that has a CSS change between multiple breakpoints, you can pass and query the pseudo-element, or can even query for the changing CSS property itself. Feel free to <a href="http://codepen.io/mherchel/pen/gbygBd">hack around and fork this over at Codepen</a>.</p></div><hr data-reactid="13"/><p class="css-fax5li" data-reactid="14"><img src="/static/herchelshead.d39009c9.jpg" alt="Mike herchel" data-reactid="15"/><!-- react-text: 16 -->Hi, I&#x27;m Mike Herchel, and I use Drupal, JavaScript, and other technologies to kick various asses throughout cyberspace.<!-- /react-text --></p></div></div></div><script>
  
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'undefined', 'auto');
  </script></body></html>